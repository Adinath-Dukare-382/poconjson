trigger: none

pool: SamplePool

variables:
- name: env
  value: pocjson



stages:
  - stage: azurescript
    jobs:
      - job:
        steps:
      
          # - task: AzureCLI@2
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     scriptType: 'ps'
          #     scriptLocation: 'inlineScript'
          #     inlineScript: az group list --query "[?location=='eastus']" --output table --output json | add-content "C:\Users\A888382\Documents\Testing1\test.txt"
              
          - task: AzureCLI@2
            inputs:
              azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
              scriptType: 'ps'
              scriptLocation: 'inlineScript'
              inlineScript: |
                $result = 'Get-AzureRmResourceGroup -Tag @{"env" = "business"}'
                $result.Name
          # - task: AzureCLI@2
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     scriptType: 'ps'
          #     scriptLocation: 'inlineScript'
          #     inlineScript: |
          #       $result = 'Get-AzureRmResourceGroup -Tag @{'env' = "business"}'
          #       $result.Name
          # - task: CmdLine@2
          #   inputs:
          #     script: 'Get-AzureRmResourceGroup -Tag @{"env" = "business"}'

          # - task: AzurePowerShell@5
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     ScriptType: 'InlineScript'
          #     Inline: 'Get-AzureRmResourceGroup -Tag @{''env'' = "business"}'
          # - task: AzurePowerShell@5
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     ScriptType: 'InlineScript'
          #     Inline: 'Get-AzureRmResourceGroup -Tag @{''env'' = "business"}'
          #     azurePowerShellVersion: 'LatestVersion'

          # - task: AzureCLI@2
          #   displayName: Azure CLI
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     scriptType: ps
          #     scriptLocation: inlineScript
          #     inlineScript: |
          #       az --version
          #       az account show

          # - task: AzureCLI@2
          #   inputs:
          #     azureSubscription: 'Visual Studio Professional Subscription(36e17b0a-f140-42b7-933a-03495cc621b2)'
          #     scriptType: 'ps'
          #     scriptLocation: 'inlineScript'
          #     inlineScript: |
          #       $result=$('az group list --query "[?location==''eastus'']" --output table') 
          #       $result

  # - template: ../templates/terraform-deploy.yml
  #   parameters:
  #     environment: ${{ variables.env }}
  #     working_dir: "$(Build.SourcesDirectory)/POCJson/env"
  #     serviceconn_name : "svc-poc2"
  #     tfresourcegroupname : "config-demo2"
  #     tfstorageaccountname : "globalstorageac"
  #     azureRmContainerName : "globalstoragecon2"
  #     tfstatefile : "terraform-tfstate.tfstate"
